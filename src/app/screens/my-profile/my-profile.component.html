<div class="container mt-4">
  <mat-card class="shadow">
    <form *ngIf="isApprovedUserLoggedIn" (change)="isDirty = true" [formGroup]="myprofileform">
      <div class="row">

        <h1 class="col-md-12">My Profile</h1>
      </div>
      <div class="row" style="padding-left: 1.6%;">

        <mat-form-field style="width:10%;">
          <mat-label>Title</mat-label>
          <mat-select matNativeControl required formControlName="title">
            <mat-option value="His Grace">His Grace</mat-option>
            <mat-option value="Very Rev Fr. Dr">Very Rev Fr. Dr</mat-option>
            <mat-option value="Very Rev">Very Rev</mat-option>
            <mat-option value="Fr">Fr</mat-option>
            <mat-option value="Rev Fr. Dr">Rev Fr. Dr</mat-option>
            <mat-option value="Rev Fr.">Rev Fr.</mat-option>
            <mat-option value="Mr">Mr</mat-option>
            <mat-option value="Ms">Ms</mat-option>
            <mat-option value="Mrs">Mrs</mat-option>
            <mat-option value="Dr">Dr</mat-option>
            <!-- <option *ngFor = "let role of roledata" [value]=role.id>{{role.name}} </option> -->
          </mat-select>
        </mat-form-field>


        <mat-form-field style="width:30%;padding-left: 1%;">
          <mat-label>First Name</mat-label>
          <input required id="firstName" matInput formControlName="firstName" placeholder="Enter First Name" />
        </mat-form-field>

        <mat-form-field style="width:30%;padding-left: 1%;">
          <mat-label>Middle Name</mat-label>
          <input required id="middleName" matInput formControlName="middleName" placeholder="Enter Middle Name" />
        </mat-form-field>

        <mat-form-field style="width:30%;padding-left: 1%;padding-right: 1.4%;">
          <mat-label>Last Name</mat-label>
          <input required id="lastName" matInput formControlName="lastName" placeholder="Enter Last Name" />
        </mat-form-field>

      </div>



      <div class="row">
        <mat-form-field class="col-md">
          <mat-label>Nick Name</mat-label>
          <input id="lastName" matInput formControlName="nickName" />
        </mat-form-field>

        <mat-form-field class="col-md">
          <mat-label>Baptismal Name</mat-label>
          <input id="baptismalName" matInput formControlName="baptismalName" />
        </mat-form-field>


        <mat-form-field class="col-md">
          <mat-label>Date of Birth</mat-label>
          <input matInput type="input" [matDatepicker]="picker" required id="dob" formControlName="dob">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

      </div>
      <div class="row">
        <mat-form-field class="col-md-4">
          <mat-label style="padding-left: 15%;">Mobile Number</mat-label>
          <input id="mobileNo" matInput formControlName="mobileNo" ng2TelInput  length="10" (keypress)="keyPress($event)"
            placeholder="Enter Mobile Number" />
            <mat-error *ngIf="myprofileform.controls.mobileNo.touched && myprofileform.controls.mobileNo.invalid">
              <span *ngIf="myprofileform.controls.mobileNo.errors.required">This field is mandatory.</span>
              <span *ngIf="myprofileform.controls.mobileNo.errors.pattern">Enter 10 digit number.</span>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="col-md-4">
          <mat-label style="padding-left: 15%;">Home Phone Number</mat-label>
          <input id="homePhoneNo" matInput formControlName="homePhoneNo" ng2TelInput  length="10" (keypress)="keyPress($event)"
            placeholder="Enter Home Phone Number" />
            <mat-error *ngIf="myprofileform.controls.homePhoneNo.touched && myprofileform.controls.homePhoneNo.invalid">
              <span *ngIf="myprofileform.controls.homePhoneNo.errors.required">This field is mandatory.</span>
              <span *ngIf="myprofileform.controls.homePhoneNo.errors.pattern">Enter 10 digit number.</span>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="col-md-4">
          <mat-label>Email Address</mat-label>
          <input id="emailId" matInput formControlName="emailId" placeholder="Enter Email Address" />
          <mat-error *ngIf="myprofileform.controls.emailId.touched && myprofileform.controls.emailId.invalid">
            <span *ngIf="myprofileform.controls.emailId.errors.required">This field is mandatory.</span>
            <span *ngIf="myprofileform.controls.emailId.errors.pattern">Enter valid email id.</span>
        </mat-error>
        </mat-form-field>
      </div>
      <div class="row">
        <mat-form-field class="col-md-12">
          <mat-label>Address Line 1</mat-label>
          <input id="addressLine1" matInput formControlName="addressLine1" placeholder="Enter Address" />
        </mat-form-field>
      </div>
      <div class="row">
        <mat-form-field class="col-md-12">
          <mat-label>Address Line 2</mat-label>
          <input id="addressLine2" matInput formControlName="addressLine2" placeholder="Enter Address" />
        </mat-form-field>
      </div>
      <div class="row">
        <mat-form-field class="col-md-12">
          <mat-label>Address Line 3</mat-label>
          <input id="addressLine3" matInput formControlName="addressLine3" placeholder="Enter Address" />
        </mat-form-field>
      </div>
      <div class="row">
        <mat-form-field class="col-md">
          <mat-label>City</mat-label>
          <input required id="city" matInput formControlName="city" placeholder="Enter Address" />
        </mat-form-field>

        <mat-form-field class="col-md">
          <mat-label>Postal Code</mat-label>
          <input required id="postalCode" matInput formControlName="postalCode" placeholder="Enter Address" />
        </mat-form-field>

        <mat-form-field class="col-md">
          <mat-label>Parish</mat-label>
          <input id="parish" matInput formControlName="parish" readonly />
        </mat-form-field>
      </div>
      <div class="row">

        <mat-form-field class="col-md-6">
          <mat-label>Country</mat-label>
          <select matNativeControl required id="country" formControlName="country" placeholder="Select Country"
            [(ngModel)]="selectedCountry" (change)="changeCountry($event)">
            <option *ngFor="let country of countries" [value]="country.countryName">{{country.countryName}}</option>
          </select>
        </mat-form-field>
        <mat-form-field class="col-md-6">
          <mat-label>State/Province</mat-label>
          <select matNativeControl required id="state" formControlName="state" placeholder="Select State/Province">
            <option *ngFor="let state of states" [value]="state">{{state}}</option>
          </select>
        </mat-form-field>
      </div>

      <div class="row">
        <mat-form-field class="col-md">
          <mat-label>Marital Status</mat-label>
          <select matNativeControl required id="maritalStatus" formControlName="maritalStatus"
            placeholder="Enter Country">
            <option value="married">Married</option>
            <option value="unmarried">Unmarried</option>
          </select>
        </mat-form-field>
        <mat-form-field class="col-md">
          <mat-label>Date of Marriage</mat-label>
          <input matInput type="input" [matDatepicker]="marriageDatepicker" required id="dateofMarriage"
            formControlName="dateofMarriage">
          <mat-datepicker-toggle matSuffix [for]="marriageDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #marriageDatepicker></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="row">
        <mat-form-field class="col-md-12">
          <mat-label>About Yourself</mat-label>
          <textarea id="aboutYourself" matInput formControlName="aboutYourself" placeholder="Enter About Yourself">
    </textarea>
        </mat-form-field>
      </div>


      <div *ngIf="showFamilyHeadQuestion" class="row">
        <div class="col-md-2">
          <h3>Is family head ?</h3>
        </div>
        <div class="col-md-4" style="padding-top: 0.4%;margin-left: -4%;">
          <mat-radio-group formControlName="isFamilyHead" aria-label="Select an option">
            <mat-radio-button [checked]=isFamilyHead value=true>Yes</mat-radio-button>&nbsp;
            <mat-radio-button [checked]=!isFamilyHead value=false>No</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <mat-divider style="position: relative;background-color:rgb(136, 88, 25);height: 2px;margin-top: 12px;">
      </mat-divider>
      <div *ngIf="hasAddMemPerm">
        <div class="row" style="padding-top: 1%;">
          <div class="col-md-6">
            <h2>Family Member Assignment</h2>
          </div>
          <div class="col-md-6 col text-right">
            <button mat-button (click)="onaddbtnclick()">
              <mat-icon>add</mat-icon>
              <span style="padding-top: 2%;font-size: 16px;">Add</span>
            </button>
          </div>
        </div>

        <fieldset>
          <div class="row" formArrayName="memberDetails"
            *ngFor="let item of myprofileform.get('memberDetails')['controls']; let i = index;">
            <div style="padding-left: 1%; width: 100%;" [formGroupName]="i">


              <div class="row">
                <div class="col-md-4" style="margin-left: -0.2%;">
                  <mat-form-field class="col text-left">
                    <mat-label>Relationship</mat-label>
                    <mat-select matNativeControl required id="relationship" formControlName="relationship"
                      placeholder="Enter Relationship">
                      <mat-option value="husband">Husband</mat-option>
                      <mat-option value="Wife">Wife</mat-option>
                      <mat-option value="Son">Son</mat-option>
                      <mat-option value="Daughter">Daughter</mat-option>
                      <mat-option value="Father">Father</mat-option>
                      <mat-option value="Mother">Mother</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="col-md-12">
                    <mat-label>Baptismal Name</mat-label>
                    <input required id="baptismalName" matInput formControlName="baptismalName" placeholder="Enter Baptismal Name" />
                  </mat-form-field>
                </div>


                <div class="col-md-8">
                  <div class="col text-right">
                    <button (click)="onremovebtnclick(i)" mat-button>
                      <mat-icon>delete</mat-icon><span>Delete</span>
                    </button>
                  </div>
                </div>

              </div>

              <div class="row" style="padding-left: 2.5%;">

                <mat-form-field style="width:10%;">
                  <mat-label>Title</mat-label>
                  <mat-select matNativeControl required formControlName="title">
                    <mat-option value="His Grace">His Grace</mat-option>
                    <mat-option value="Very Rev Fr. Dr">Very Rev Fr. Dr</mat-option>
                    <mat-option value="Very Rev">Very Rev</mat-option>
                    <mat-option value="Fr">Fr</mat-option>
                    <mat-option value="Rev Fr. Dr">Rev Fr. Dr</mat-option>
                    <mat-option value="Rev Fr.">Rev Fr.</mat-option>
                    <mat-option value="Mr">Mr</mat-option>
                    <mat-option value="Ms">Ms</mat-option>
                    <mat-option value="Mrs">Mrs</mat-option>
                    <mat-option value="Dr">Dr</mat-option>
                    <!-- <option *ngFor = "let role of roledata" [value]=role.id>{{role.name}} </option> -->
                  </mat-select>
                </mat-form-field>


                <mat-form-field style="width:30%;padding-left: 1%;">
                  <mat-label>First Name</mat-label>
                  <input required id="firstName" matInput formControlName="firstName" placeholder="Enter First Name" />
                </mat-form-field>

                <mat-form-field style="width:30%;padding-left: 1%;">
                  <mat-label>Middle Name</mat-label>
                  <input required id="middleName" matInput formControlName="middleName"
                    placeholder="Enter Middle Name" />

                </mat-form-field>

                <mat-form-field style="width:30%;padding-left: 1%;padding-right: 2%;">
                  <mat-label>Last Name</mat-label>
                  <input required id="lastName" matInput formControlName="lastName" placeholder="Enter Last Name" />
                </mat-form-field>

              </div>



              <div class="row" style="padding-left: 1%;">
                <mat-form-field class="col-md-4">
                  <mat-label>Date of Birth</mat-label>
                  <input matInput type="input" [matDatepicker]="picker" required id="dob" formControlName="dob">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>

                </mat-form-field>

                <mat-form-field class="col-md-4">
                  <mat-label style="padding-left: 15%;">Mobile Number</mat-label>
                  <!-- <input id="mobileNo" matInput formControlName="mobileNo" placeholder="Enter Mobile No" ng2TelInput length="10"/>                  -->
                  <input matInput type="text" ng2TelInput formControlName="mobileNo" id="mobileNo" maxLength="10"
                    minLength="10" required style="width: fit-content;" />
                    <mat-error *ngIf="myprofileform.controls.mobileNo.touched && myprofileform.controls.mobileNo.invalid">
                      <span *ngIf="myprofileform.controls.mobileNo.errors.required">This field is mandatory.</span>
                      <span *ngIf="myprofileform.controls.mobileNo.errors.pattern">Enter 10 digit number.</span>
                  </mat-error>
                </mat-form-field>

                <mat-form-field class="col-md-4" style="padding-right: 2%;">
                  <mat-label>Email Address</mat-label>
                  <input required id="emailId" matInput formControlName="emailId" placeholder="Enter Email Address" />
                  <mat-error *ngIf="myprofileform.controls.emailId.touched && myprofileform.controls.emailId.invalid">
                    <span *ngIf="myprofileform.controls.emailId.errors.required">This field is mandatory.</span>
                    <span *ngIf="myprofileform.controls.emailId.errors.pattern">Enter valid mailid.</span>
                </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
        </fieldset>
        <mat-divider style="position: relative;background-color:rgb(136, 88, 25);height: 2px;margin-top: 12px;">
        </mat-divider>

      </div>

      <div class="row" style="padding-top: 1%;">
        <div class="col text-center">
          <button mat-button type="submit" mat-button class="mbutton" (change)="isDirty = false"
            (click)="updateUserProfile()">
            Update</button>
        </div>
      </div>
    </form>

    <!-- ****************************************  Basic edit profile Sign up form Code ****************************************** -->

      <form *ngIf="!isApprovedUserLoggedIn" [formGroup]="signUpForm" class="p-2">

        <div class="row form-group">
            <mat-form-field class="form-field col-2">
                    <mat-select formControlName="title" id="title" placeholder="Title">
                            <mat-option value="His Grace">His Grace</mat-option>
                            <mat-option value="Very Rev Fr. Dr">Very Rev Fr. Dr</mat-option>
                            <mat-option value="Very Rev">Very Rev</mat-option>
                            <mat-option value="Fr">Fr</mat-option>
                            <mat-option value="Rev Fr. Dr">Rev Fr. Dr</mat-option>
                            <mat-option value="Rev Fr.">Rev Fr.</mat-option>
                            <mat-option value="Mr">Mr</mat-option>
                            <mat-option value="Ms">Ms</mat-option>
                            <mat-option value="Mrs">Mrs</mat-option>
                            <mat-option value="Dr">Dr</mat-option>
                    </mat-select>
            </mat-form-field>
            <mat-form-field class="form-field col-md-5">
                <input matInput formControlName="firstName" id="firstname" placeholder="First Name" maxlength="25" required>
                <mat-error *ngIf="signUpForm.controls.firstName.touched && signUpForm.controls.firstName.invalid">
                    <span *ngIf="signUpForm.controls.firstName.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.firstName.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="form-field col-md-5">
                <input type="text" matInput formControlName="lastName" id="lastname" placeholder="Last Name" maxlength="25" required>
                <mat-error *ngIf="signUpForm.controls.lastName.touched && signUpForm.controls.lastName.invalid">
                    <span *ngIf="signUpForm.controls.lastName.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.lastName.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
        </div>

        <div class="form-group row justify-content-center">
            <mat-form-field class="form-field col-md">
                <input [readonly]=true type="text" matInput formControlName="email" id="email" placeholder="Email" required>
                <mat-error *ngIf="signUpForm.controls.email.touched && signUpForm.controls.email.invalid">
                    <span *ngIf="signUpForm.controls.email.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.email.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
        </div>
        <div class="row">
            <mat-form-field class="form-field col col-md">
                <mat-label style="padding-left: 23%;">Mobile Number</mat-label>
                <input matInput type="text" ng2TelInput (ng2TelOutput)="getNumber($event)" formControlName="mobileNo" id="mobileNo" maxLength="10" (keypress)="keyPress($event)" required style="width: fit-content;"/>
                <mat-error *ngIf="signUpForm.controls.mobileNo.touched && signUpForm.controls.mobileNo.invalid">
                    <span *ngIf="signUpForm.controls.mobileNo.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.mobileNo.errors.pattern">Enter 10 digit number.</span>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="form-field col-12 col-md-6">
                <input matInput type="input" [matDatepicker]="picker" [max]="max_date" formControlName="dob" id="dob" placeholder="DoB" required>
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
                <mat-error *ngIf="signUpForm.controls.dob.touched && signUpForm.controls.dob.invalid">
                    <span *ngIf="signUpForm.controls.dob.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.dob.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
                           </div>
<!-- 
        <div class="form-group row justify-content-center">
            <mat-form-field class="form-field col-md">
                <input type="text" matInput formControlName="username" id="username" placeholder="Username" required>
                <mat-error *ngIf="signUpForm.controls.username.touched && signUpForm.controls.username.invalid">
                    <span *ngIf="signUpForm.controls.username.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.username.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
        </div> -->
        <!-- <div class="row justify-content-center">
            <mat-form-field class="form-field col-md">
                <input type="password" matInput formControlName="password" id="password" placeholder="Password" minlength="8" required>
                <mat-error *ngIf="signUpForm.controls.password.touched && signUpForm.controls.password.invalid">
                    <span *ngIf="signUpForm.controls.password.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.password.errors.pattern">Enter strong password.</span>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="form-field col-md">
                <input type="password" matInput formControlName="cnfmpwd" id="cnfmpwd" placeholder="Confirm Password" required>
                <mat-error *ngIf="signUpForm.controls.cnfmpwd.touched && signUpForm.controls.cnfmpwd.invalid">
                    <span *ngIf="signUpForm.controls.cnfmpwd.errors.required">This field is mandatory.</span>
                    <span *ngIf="signUpForm.controls.cnfmpwd.errors.pattern">This field is invalid.</span>
                </mat-error>
            </mat-form-field>
        </div> -->
        <div class="form-group row">
                <mat-form-field class="form-field col-md">
                        <mat-select formControlName="memberType" id="memberType" placeholder="Member Type">
                                <mat-option value="member">Member</mat-option>
                                <mat-option value="non-member">Non-member</mat-option>
                                <mat-option value="guest">Guest</mat-option>
                        </mat-select>
                </mat-form-field>
                <mat-form-field class="form-field col-md" >
                        <mat-select id="orgId" formControlName = "orgId" placeholder="Parish" required>
                          <mat-option *ngFor = "let parish of parishList" [value]=parish.id>{{parish.name}} </mat-option>
                        </mat-select>
                      </mat-form-field>
        </div>

        <div class="form-group row justify-content-center">
            <mat-form-field class="form-field col-md">
                <textarea type="text" matInput formControlName="abtyrslf" id="abtyrslf" placeholder="About Yourself"></textarea>
            </mat-form-field>
        </div>
      

        <div class="form-group text-right">
            <button mat-button type="submit" routerLinkActive="active" class="mbutton mr-1" (click)="cancel()">Cancel</button>
            <button mat-button id="signInBtn" type="submit" routerLinkActive="active" class="mbutton" (click)="updateUserProfile()">Update</button>
        </div>
    </form>

  </mat-card>
</div>